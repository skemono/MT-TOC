---
q_states:
  q_list:
    - '0'
    - '1'
    - '2'
    - '3'
    - '4'
    - '5'
  initial: '0'
  final: '5'

alphabet:
  - a
  - b
  - '#'

tape_alphabet:
  - a
  - b
  - '#'
  - X
  -   # blank

delta:

  # Q0 → marcar primer símbolo (a)
  - params:
      initial_state: '0'
      mem_cache_value:
      tape_input: a
    output:
      final_state: '1'
      mem_cache_value: a
      tape_output: X
      tape_displacement: R

  # Q0 → primer símbolo (b)
  - params:
      initial_state: '0'
      mem_cache_value:
      tape_input: b
    output:
      final_state: '1'
      mem_cache_value: b
      tape_output: X
      tape_displacement: R

  # Q0 → si veo # ya no hay más lado izquierdo → aceptar
  - params:
      initial_state: '0'
      mem_cache_value:
      tape_input: '#'
    output:
      final_state: '5'
      mem_cache_value:
      tape_output: '#'
      tape_displacement: S

  # Q0 → si veo X al inicio, avanzar para buscar siguiente símbolo no marcado
  - params:
      initial_state: '0'
      mem_cache_value:
      tape_input: X
    output:
      final_state: '0'
      mem_cache_value:
      tape_output: X
      tape_displacement: R

  # Q1 → avanzar hasta # (ignorando a y b) - CON MEMORIA 'a'
  - params:
      initial_state: '1'
      mem_cache_value: a
      tape_input: a
    output:
      final_state: '1'
      mem_cache_value: a
      tape_output: a
      tape_displacement: R

  - params:
      initial_state: '1'
      mem_cache_value: a
      tape_input: b
    output:
      final_state: '1'
      mem_cache_value: a
      tape_output: b
      tape_displacement: R

  - params:
      initial_state: '1'
      mem_cache_value: a
      tape_input: X
    output:
      final_state: '1'
      mem_cache_value: a
      tape_output: X
      tape_displacement: R

  # Al encontrar # → pasar a Q2 - MANTENER MEMORIA 'a'
  - params:
      initial_state: '1'
      mem_cache_value: a
      tape_input: '#'
    output:
      final_state: '2'
      mem_cache_value: a
      tape_output: '#'
      tape_displacement: R

  # Q1 → avanzar hasta # (ignorando a y b) - CON MEMORIA 'b'
  - params:
      initial_state: '1'
      mem_cache_value: b
      tape_input: a
    output:
      final_state: '1'
      mem_cache_value: b
      tape_output: a
      tape_displacement: R

  - params:
      initial_state: '1'
      mem_cache_value: b
      tape_input: b
    output:
      final_state: '1'
      mem_cache_value: b
      tape_output: b
      tape_displacement: R

  - params:
      initial_state: '1'
      mem_cache_value: b
      tape_input: X
    output:
      final_state: '1'
      mem_cache_value: b
      tape_output: X
      tape_displacement: R

  # Al encontrar # → pasar a Q2 - MANTENER MEMORIA 'b'
  - params:
      initial_state: '1'
      mem_cache_value: b
      tape_input: '#'
    output:
      final_state: '2'
      mem_cache_value: b
      tape_output: '#'
      tape_displacement: R

  # Q2 → comparar símbolo mem con símbolo en el lado derecho
  - params:
      initial_state: '2'
      mem_cache_value: a
      tape_input: a
    output:
      final_state: '3'
      mem_cache_value:
      tape_output: X
      tape_displacement: L

  - params:
      initial_state: '2'
      mem_cache_value: b
      tape_input: b
    output:
      final_state: '3'
      mem_cache_value:
      tape_output: X
      tape_displacement: L

  # Q2 → si encontramos X después de #, significa que ya comparamos todo → aceptar
  - params:
      initial_state: '2'
      mem_cache_value: a
      tape_input: X
    output:
      final_state: '5'
      mem_cache_value:
      tape_output: X
      tape_displacement: S

  - params:
      initial_state: '2'
      mem_cache_value: b
      tape_input: X
    output:
      final_state: '5'
      mem_cache_value:
      tape_output: X
      tape_displacement: S

  # Q3 → volver al inicio hasta encontrar un X
  - params:
      initial_state: '3'
      mem_cache_value:
      tape_input: a
    output:
      final_state: '3'
      mem_cache_value:
      tape_output: a
      tape_displacement: L

  - params:
      initial_state: '3'
      mem_cache_value:
      tape_input: b
    output:
      final_state: '3'
      mem_cache_value:
      tape_output: b
      tape_displacement: L

  - params:
      initial_state: '3'
      mem_cache_value:
      tape_input: '#'
    output:
      final_state: '3'
      mem_cache_value:
      tape_output: '#'
      tape_displacement: L

  # Q3 → saltar X del lado derecho
  - params:
      initial_state: '3'
      mem_cache_value:
      tape_input: X
    output:
      final_state: '4'
      mem_cache_value:
      tape_output: X
      tape_displacement: L

  # Q4 → seguir retrocediendo hasta encontrar X del lado izquierdo
  - params:
      initial_state: '4'
      mem_cache_value:
      tape_input: a
    output:
      final_state: '4'
      mem_cache_value:
      tape_output: a
      tape_displacement: L

  - params:
      initial_state: '4'
      mem_cache_value:
      tape_input: b
    output:
      final_state: '4'
      mem_cache_value:
      tape_output: b
      tape_displacement: L

  # Q4 → al encontrar X del lado izquierdo, avanzar y volver a Q0
  - params:
      initial_state: '4'
      mem_cache_value:
      tape_input: X
    output:
      final_state: '0'
      mem_cache_value:
      tape_output: X
      tape_displacement: R

simulation_strings:
  - aab#aab
  - ab#ab
  - abbababa#aba
  - aa#aa
  - ab#ba
